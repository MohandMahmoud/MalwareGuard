import io
import tkinter as tk
from tkinter import filedialog 
from PIL import Image
import os


def convert_to_image(input_file, output_image):
    with open(input_file, 'rb') as file:
        binary_data = file.read()

    # Calculate the dimensions of the image based on the binary data size
    data_size = len(binary_data)
    image_width = int(data_size ** 0.5) + 1
    image_height = (data_size // image_width) + 1

    # Create a new image
    image = Image.new('RGB', (image_width, image_height))

    # Encode the binary data as pixel colors
    pixels = image.load()
    index = 0
    for y in range(image_height):
        for x in range(image_width):
            if index < data_size:
                byte_value = binary_data[index]
                pixels[x, y] = (byte_value, byte_value, byte_value)
                index += 1

    # Save the image
    image.save(output_image)
    print("Image created successfully.")
